# JS经验

##  reduce的另类用法

```js
var str = 'ljkafhklsdfhaskfas'
var result = str.split('').reduce((a,b) => (a[b]++ || a[b] = 1), a), {})
```

其中还使用了**括号运算符**，未简化之前的代码：

```js
var str = 'ljkafhklsdfhaskfas'
var result = str.split('').reduce((a,b) => {
    if (a[b]) {
        a[b]++
    } else {
        a[b] = 1
    }
    return a 
}, {})
```



## 输入框拼写合成

```js
const inp = ducument.querySelector('input')
let isComposite = false;

inp.addEventListener('compositionstart', () => {
    isComposite = true
})

inp.addEventListener('compositionend', () => {
    isComposite = false
})
```

然后在执行搜索，或者发送事件之前，去判断这个值就行了







## 限制并发请求数量

```js
function concurRequest(urls, maxNum) {
  return new Promise((resolve) => {
    if (urls.length === 0) {
      resolve([]);
      return;
    }
    const results = []
    let index = 0
    let count = 0;
    
    async function request() {
      const i = index
      const url = urls[i];
      index++;
      try {
        const res = await fetch(url);
        results[i] = res;
      } catch (error) {
        results[i] = error;
      } finally {
        count++;
        if (count === urls.length) {
          resolve(results)
        }
      }
    }

    const times = Math.min(maxNum, urls.length)
    for (let i = 0; i < times; i++) {
      request()
    }
  })
}
```

## 滚动到可视区域

```js
$0.scrollIntoView()

$0.scrollIntoView({behavior: 'smooth'})

$0.scrollIntoView({behavior: 'smooth', block: 'center'})
```

## 求数组中的最大值和最小值

```js
var arr = [1, 66, 3, 99, 4];
var max = Math.max.apply(Math, arr);
var min = Math.min.apply(Math, arr);
```



## 避免通过new来调用函数

```js
function a () {
  if (new.target) {
    throw new Error("can't invoke with 'new'")
  }
}
```

## 判断页面是不是在移动端设备上打开的

```js
const onMobileDevice = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
```



# Ts 类型

| 类型  | ts类型              |
| :---- | :------------------ |
| style | React.CSSProperties |
|       |                     |
|       |                     |




# css经验

## flex布局吃掉更多的宽度问题

弹性盒子均匀分布的时候，因为item盒子的内部内容多而撑大了宽度，这个时候可以设置

```css
.item{
    flex-grow: 1;   // 增长为1
    flex-basis: 0;  // 起始宽度为0  默认是auto的
    flex: 1 0 0;  // 合并起来可以写成这样
}
```



## 磨砂玻璃的效果

```
filter: blur(5px);  // 不要这样写，因为这样写模糊的是本身，包括本身的内容也模糊了
```

```
backdrop-filter: blur(5px) // 这样就不会模糊自己，而是模糊它盖住的后面的东西
background: rgba(255, 255, 255, 0.4)
```



## 彩色照片灰度处理效果

在一张照片之上绝对定位或者fixed定位一个盒子

```css
.modal {
	backdrop-filter: grayscale(1) // 灰度设置1
	transition: 2s;
	right: 0 // 这里设置right就会向右边过度显示彩色
}

.container: hover .modal {
	width: 0;
}
```

## 文字描边

```css
-webkit-text-stroke: 2px #fff
```



## 特别小的文字

```css
span{
    display: inline-block; // 需要设置成块级元素，因为缩放只对块级元素有效果
    font-size: 12px;
    transform: scale(0.5);
    transform-origin: left center; // 默认是在中心进行缩放的，所以要设置缩放参照点
}
```



## 蒙版遮罩

```css
.test{
    -webkit-mask-image: 
      linear-gradient(to right,
        #000,
        #000 3px,
        transparent 3px,
        transparent calc(100% - 3px),
        #000 calc(100% - 6px),
        #000 100%
      )
        ,
      linear-gradient(to bottom,
        #000,
        #000 3px,
        transparent 3px,
        transparent calc(100% - 3px),
        #000 calc(100% - 6px),
        #000 100%
      )
    ;
    -webkit-mask-position: center;
    -webkit-mask-repeat: no-repeat;
}
```



## 效果过度时长处理

```
transitionz: all 2s ease;
```



## 滚动条样式美化

```css
&::-webkit-scrollbar {
  width: .1481rem;
}
&::-webkit-scrollbar-thumb{
  background: transparent;
}
&:hover::-webkit-scrollbar-thumb {
  border-radius: .1481rem;
  background: rgba($color: white,$alpha: 0.6);
}
&::-webkit-scrollbar-track {
  border-radius: 0;
  background: transparent;
}

// 以下这样可以避免滚动条的出现和隐藏会影响到边距

useLayoutEffect(() => {
	const adjustMarginBasedOnScrollbar = () => {
		const scrollableDiv = topRef.current;
		let padding = '.2963rem'
		if (scrollableDiv.scrollHeight > scrollableDiv.clientHeight) {
			padding = '.1481rem'
		}
		scrollableDiv.style.paddingRight = padding
	};

	window.addEventListener('resize', adjustMarginBasedOnScrollbar);
	adjustMarginBasedOnScrollbar()

	return () => {
		window.removeEventListener('resize', adjustMarginBasedOnScrollbar);
	};
}, [])
```

## Img 图片长宽比固定

```css
background-image: url('./imgs/G14.jpg');
background-size: cover;
background-position: center;
```

## 阴影效果

```css
filter: drop-shadow(0px 0px 20px #000);
```

## 鼠标样式变化

```css
cursor: pointer; 变成小手

cursor: move; 变成移动十字架

cursor: not-allowed; 变成禁止点击
```



## 同时选中多个className

```css
div[class^='dingkaile']{
	样式
}
```



## 选中第开始个到第结束个元素

```css
&:nth-child(n + 开始):nth-child(-n + 结束)
```



## 选择前面几个元素

```css
&:nth-child(-n + M)   // 选中1 2 3 ... M 
```



## 选中某个元素之后的所有元素

```css
 &:nth-child(n + M)   // 选中的是第M个开始直到最后一个元素 
```





## **去掉input框获得焦点的时候的蓝色框**

input{

Outline: none;

}	



## 透明色的别样写法

```
rgba($color: white, $alpha: 0.1)
```



# React备忘

## 合并className

```
import clsx from 'clsx';

<div className={
  clsx("class1", 'class2',{
  	'classMaybeExist1': boolean1,
  	'classMaybeExist2': boolean2,
  })
}>
```



# Vue备忘



# 踩坑之路

## react全局样式

==**正确写法**==

```css
//单个：
:global(.ant-tabs) {
  background: green;
}

//多个：
:global{
  .ant-tabs{
    background: green;
  }
}
```

而不是：

```css
&:global

::global

&::global
```



## 资源加载不出来的可能原因

有可能是走了缓存，所以没有刷新文件，所以在开发的时候，一定要记得把Network 中的Disable cache给勾选上



### **设置了line-height却没有垂直居中**

原因是行高是依据盒子的height居中对齐的话，这个height是包含border和padding的。如果有border和padding就会影响到ling-height中心线的位置。需要减掉border和padding的高度。



# 调试经验

## 断点调试

<img src="./imgs/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B0%83%E8%AF%95.jpg" alt="浏览器调试截图"  />



+ 第一个按钮是执行完这一行（下一步）

+ 第二个按钮是进入到这一行中执行的函数内部（进入函数）

+ 第三个是跳出当前函数，返回到调用处（离开函数）
+ 下面是显示所有的断点。可以在此打开和关闭所选断点
+ watch中是可以套用作用域中的变量来进行运算监控，或者直接监控的。也可以输入某个作用域中的函数，查看该函数的返回值



## 获取节点方式

```js
// 相当于ducument.querySelector()
$('div')

// 相当于document.querySelectorAll
$$('#dingkaile')

// 上一次的返回值
$_

// 最近五次点击选中的dom
$0到4

```



## 隐藏元素 ：  

选中dom后，按H  可以切换元素的显示和隐藏



## 编辑dom的class list

+ 点击 .cls 可以看到这个dom上面的所有的class类名，也可以选中点掉，去除类名看效果



## dom断点

选中dom后，按右键有 Break on 其中有三种形式

+ subtree modifications 

  > 它的子组件中有什么变更，就会断在这里

+ attribute modifications

  > 自身添加一些属性，就会断

+ node removal

  > dom被移除的时候断掉



## 截图

ctrl + p   或者 command shift + p

然后输入 >screen



## 通过结构搜索dom

在element面板中进行搜索

//div/div/img   就可以找到匹配这种排列结构的dom



## 控制台中输出语句的样式定义

```js
const style = 'font-size: 20px; color: red;'
console.log('%c你好世界', 'color: red;');

var message = '你好世界';
console.log('%c' + message, style);
```



## 控制台中监听某个数值

点击小眼睛，然后输入需要监听的数据

```js
window.innerHeight

Date.now()
```



## 控制台中复制东西

copy（变量名称）



## 定义和运行代码片段

在Snipets中创建js文件。然后commad + P 

```
!文件名称
```

就可以运行该文件的js片段



## 控制台计数

```js
console.count('dingkaile')  // 每运行一次这个代码，就会+1并打印一次最新计数
console.countReset('dingkaile') // 清除计数
```



## 控制台显示调用栈信息

```js
console.trace()
```





# vsCode技巧

### 快速写N个列表的代码

```js
ul>li{列表$}*100
```

